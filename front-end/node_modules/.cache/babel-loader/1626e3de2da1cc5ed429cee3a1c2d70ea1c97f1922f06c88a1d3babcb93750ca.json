{"ast":null,"code":"var _import$meta,_import$meta$env;// src/servicios/alumnos.js\nimport axios from'axios';const API_BASE=((_import$meta=import.meta)===null||_import$meta===void 0?void 0:(_import$meta$env=_import$meta.env)===null||_import$meta$env===void 0?void 0:_import$meta$env.VITE_API_BASE_URL)||process.env.REACT_APP_API_URL||'http://127.0.0.1:8000/api';function unpack(data){if(Array.isArray(data))return data;if(data&&Array.isArray(data.results))return data.results;// DRF paginado\nreturn[];}export async function obtenerAlumnosPorCurso(cursoId){// Trae el curso (para encabezado)\nconst{data:curso}=await axios.get(\"\".concat(API_BASE,\"/cursos/\").concat(cursoId,\"/\"));// Trae alumnos por curso\nconst{data}=await axios.get(\"\".concat(API_BASE,\"/estudiantes/?curso=\").concat(cursoId));const rows=unpack(data);const alumnos=rows.map(a=>{var _a$run,_a$nombres_apellidos,_a$curso,_a$curso2;return{id:a.id,run:(_a$run=a.run)!==null&&_a$run!==void 0?_a$run:'',nombreCompleto:(_a$nombres_apellidos=a.nombres_apellidos)!==null&&_a$nombres_apellidos!==void 0?_a$nombres_apellidos:'',// El serializer ya trae 'curso' anidado; si no, usamos el nombre del curso obtenido\ncursoNombre:((_a$curso=a.curso)===null||_a$curso===void 0?void 0:_a$curso.nombre)||((_a$curso2=a.curso)===null||_a$curso2===void 0?void 0:_a$curso2.nombre_display)||(curso===null||curso===void 0?void 0:curso.nombre)||''};});return{curso,alumnos};}","map":{"version":3,"names":["axios","API_BASE","_import$meta","import","meta","_import$meta$env","env","VITE_API_BASE_URL","process","REACT_APP_API_URL","unpack","data","Array","isArray","results","obtenerAlumnosPorCurso","cursoId","curso","get","concat","rows","alumnos","map","a","_a$run","_a$nombres_apellidos","_a$curso","_a$curso2","id","run","nombreCompleto","nombres_apellidos","cursoNombre","nombre","nombre_display"],"sources":["/home/ec2-user/proyecto_integracion/front-end/src/servicios/alumnos.js"],"sourcesContent":["// src/servicios/alumnos.js\nimport axios from 'axios';\n\nconst API_BASE =\n  import.meta?.env?.VITE_API_BASE_URL ||\n  process.env.REACT_APP_API_URL ||\n  'http://127.0.0.1:8000/api';\n\nfunction unpack(data) {\n  if (Array.isArray(data)) return data;\n  if (data && Array.isArray(data.results)) return data.results; // DRF paginado\n  return [];\n}\n\nexport async function obtenerAlumnosPorCurso(cursoId) {\n  // Trae el curso (para encabezado)\n  const { data: curso } = await axios.get(`${API_BASE}/cursos/${cursoId}/`);\n\n  // Trae alumnos por curso\n  const { data } = await axios.get(`${API_BASE}/estudiantes/?curso=${cursoId}`);\n  const rows = unpack(data);\n\n  const alumnos = rows.map((a) => ({\n    id: a.id,\n    run: a.run ?? '',\n    nombreCompleto: a.nombres_apellidos ?? '',\n    // El serializer ya trae 'curso' anidado; si no, usamos el nombre del curso obtenido\n    cursoNombre: a.curso?.nombre || a.curso?.nombre_display || curso?.nombre || '',\n  }));\n\n  return { curso, alumnos };\n}\n"],"mappings":"kCAAA;AACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,QAAQ,CACZ,EAAAC,YAAA,CAAAC,MAAM,CAACC,IAAI,UAAAF,YAAA,kBAAAG,gBAAA,CAAXH,YAAA,CAAaI,GAAG,UAAAD,gBAAA,iBAAhBA,gBAAA,CAAkBE,iBAAiB,GACnCC,OAAO,CAACF,GAAG,CAACG,iBAAiB,EAC7B,2BAA2B,CAE7B,QAAS,CAAAC,MAAMA,CAACC,IAAI,CAAE,CACpB,GAAIC,KAAK,CAACC,OAAO,CAACF,IAAI,CAAC,CAAE,MAAO,CAAAA,IAAI,CACpC,GAAIA,IAAI,EAAIC,KAAK,CAACC,OAAO,CAACF,IAAI,CAACG,OAAO,CAAC,CAAE,MAAO,CAAAH,IAAI,CAACG,OAAO,CAAE;AAC9D,MAAO,EAAE,CACX,CAEA,MAAO,eAAe,CAAAC,sBAAsBA,CAACC,OAAO,CAAE,CACpD;AACA,KAAM,CAAEL,IAAI,CAAEM,KAAM,CAAC,CAAG,KAAM,CAAAjB,KAAK,CAACkB,GAAG,IAAAC,MAAA,CAAIlB,QAAQ,aAAAkB,MAAA,CAAWH,OAAO,KAAG,CAAC,CAEzE;AACA,KAAM,CAAEL,IAAK,CAAC,CAAG,KAAM,CAAAX,KAAK,CAACkB,GAAG,IAAAC,MAAA,CAAIlB,QAAQ,yBAAAkB,MAAA,CAAuBH,OAAO,CAAE,CAAC,CAC7E,KAAM,CAAAI,IAAI,CAAGV,MAAM,CAACC,IAAI,CAAC,CAEzB,KAAM,CAAAU,OAAO,CAAGD,IAAI,CAACE,GAAG,CAAEC,CAAC,OAAAC,MAAA,CAAAC,oBAAA,CAAAC,QAAA,CAAAC,SAAA,OAAM,CAC/BC,EAAE,CAAEL,CAAC,CAACK,EAAE,CACRC,GAAG,EAAAL,MAAA,CAAED,CAAC,CAACM,GAAG,UAAAL,MAAA,UAAAA,MAAA,CAAI,EAAE,CAChBM,cAAc,EAAAL,oBAAA,CAAEF,CAAC,CAACQ,iBAAiB,UAAAN,oBAAA,UAAAA,oBAAA,CAAI,EAAE,CACzC;AACAO,WAAW,CAAE,EAAAN,QAAA,CAAAH,CAAC,CAACN,KAAK,UAAAS,QAAA,iBAAPA,QAAA,CAASO,MAAM,KAAAN,SAAA,CAAIJ,CAAC,CAACN,KAAK,UAAAU,SAAA,iBAAPA,SAAA,CAASO,cAAc,IAAIjB,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEgB,MAAM,GAAI,EAC9E,CAAC,EAAC,CAAC,CAEH,MAAO,CAAEhB,KAAK,CAAEI,OAAQ,CAAC,CAC3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}